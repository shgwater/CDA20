---
title: 2018-3-28决策树实例
tags: 决策树,R实例
grammar_cjkRuby: true
---
# 决策树实例
## 1 项目背景
有一款医疗险产品主要面向
## 2 决策树基本介绍
### 有监督算法和无监督算法
**有监督算法：最常见为回归&分类问题。**
- 从给定的训练数据中学习一个函数，当新的数据到来时，可以根据这个函数预测结果。监督学习的训练集包括输入和输出，也可以说是特征和目标。训练集中的目标是人为标注的。
- 利用历史结果回答商业问题

**无监督算法：最常见为密度估计&聚类问题**
- 与监督学习相比，训练集没有认为标注的结果
- AlphaGo
- 最终不知道目标变量是什么。

### 决策树-Example（例子）
- 目标：通过是否拥有房产、婚姻状况、收入来预测某个群体是否具有偿债能力。
- 自变量：是否拥有房产、是否结婚、收入
- 因变量：是否有偿债能力。

### 分类问题
在数据挖掘领域，分类是利用一个分类器（分类模型），将数据映射到预先定义好的群组或类。
一般的分类问题可分为两分类和多分类两种。
- 完整的分类过程包括三个步骤：学习模块，验证模块，测试模块
### 多酚类问题如何转化
假设我们的目标变量有五种分类，如何转化？
- 一对多
将类别1看作证类，其余2,3,4,5看作负累（一对多），这样拿一个样本来，可以告诉你是不是属于类别一，如果不属于，再在1,2,3,4中继续寻找。
- 一对一
从1-5中任意选取2种类别来分类，得到5x4/2=10中分类器，每一个分类器只告诉你是第一类还是第二类，或者是第一类还是第三类，统计所有分类器的票数，根据票数得到分类结果。
### 分类问题VS回归问题
- 分类问题：尝试从一个或多个连续、分类预测变量中预测一个分类变量
- 回归问题：尝试从一个或多个连续、分类预测变量中预测一个**连续变量**
- 分类和回归的区别主要在于输出变量的类型
  - 定量输出称为回归，或者说是连续变量的预测。
  - 定性输出称为分类，或者说是离散变量的预测。
### 分类模型的性能
分类模型的性能评价指标
- 混淆矩阵（Confusion Matrix)

|  |  | 预测正例| 预测反例 |
|   ---  |  --- |  ---   |  ---   |
|  真实   |    正 |   TP（真正例）  |   FN（假反例  |
|  情况  |    反 |    EP（假正例） |   TN（真反例）  |

- 错误率（Error Rate）
- 敏感性( Sensitivity, True Positive Rate） = 真正例/实际正例总数
- 特异性(Specificity, True Negative Rate) = 真反例/实际反例总数
- ROC曲线： x轴为1-specificity， y轴为sensitivity
- Lift曲线： x轴为depth=(TP+FP)/(TP+FP+FN+TN）预测成正例的比例， y轴为lift=（TP/(TP+FP)）/((TP+FN)/(TP+FP+FN+TN))，预测正例的比例比上实际正例的比例。

### ROC曲线VSLift曲线
ROC曲线越凸越好。
Lift曲线的阈值从左到右，y变得越来越小，这样的说明模型效果好。

----------


----------
